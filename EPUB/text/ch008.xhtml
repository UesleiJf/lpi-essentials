<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <title>Tópico 4: O Sistema Operacional Linux</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <link rel="stylesheet" type="text/css" href="../styles/stylesheet1.css" />
</head>
<body>
<section id="tópico-4-o-sistema-operacional-linux" class="level1">
<h1>Tópico 4: O Sistema Operacional Linux</h1>
<p><strong>Peso:</strong> 8</p>
<section id="escolhendo-um-sistema-operacional" class="level2">
<h2>4.1: Escolhendo um Sistema Operacional</h2>
<p><strong>Peso:</strong> 1</p>
<p>Todo sistema operacional possui as mesmas finalidades básicas, que são controlar o hardware, gerenciar programas e oferecer uma interface de operação ao usuário. Contudo, diferentes tipos de sistemas operacionais empregam diferentes abordagens.</p>
<p>Se considerarmos os computadores pessoais tradicionais, os sistemas operacionais mais utilizados são o Microsoft Windows e o Mac OS X. Em menor medida, estão as distribuições Linux. Considerando servidores, dispositivos embarcados e móveis, a participação do Linux é a maior.</p>
<p>Principalmente no âmbito da computação pessoal, eleger o melhor sistema operacional é muito mais uma questão pessoal do que um critério objetivo. De uma maneira ou de outra, tudo o que um sistema operacional pode oferecer pode ser encontrado em outro. De fato, os principais sistemas operacionais possuem muitas diferenças importantes.</p>
<section id="microsoft-windows" class="level3">
<h3>Microsoft Windows</h3>
<p>O Windows é o sistema operacional mais popular entre usuários domésticos. É produzido pela Microsoft e totalmente proprietário. Apesar de poder ser comprado diretamente pelo usuário, é mais comum que esteja pré-instalado pelo fabricante do computador. Também é muito utilizado irregularmente, instalado a partir de cópias piratas. Suas principais vantagens são:</p>
<ul>
<li>Familiar. A maioria dos usuário de computador conhece a interface do Windows.</li>
<li>Compatibilidade. O Windows pode ser instalado em praticamente qualquer computador contemporâneo à sua versão de lançamento. Praticamente todo dispositivo fabricado é feito para funcionar com Windows.</li>
<li>Programas. Existem incontáveis programas para Windows. Alguns muito específicos possuem versão somente pra Windows e não há similares para outros sistemas operacionais.</li>
</ul>
<p>Algumas de suas desvantagens são:</p>
<ul>
<li>Restritivo. Legalmente, não é possível instalar e compartilhar o Windows sem comprar uma licença.</li>
<li>Inflexível. Um técnico ou desenvolvedor vai encontrar dificuldades se deseja realizar tarefas de modo diferente ao padrão do Windows.</li>
<li>Programas mal-intencionados. Existem muitos programas mal-intencionados e vírus desenvolvidos para Windows.</li>
</ul>
<p>O desempenho do Windows varia conforme o computador onde está instalado. Versões mais antigas, como o Windows 7, ainda são utilizadas por ter um bom desempenho mesmo em computadores já obsoletos.</p>
</section>
<section id="mac-os-x" class="level3">
<h3>Mac OS X</h3>
<p>O OS X é o sistema operacional produzido pela Apple para sua linha de computadores pessoais. O OS X difere de suas versões anteriores principalmente na base do sistema, desenvolvida a partir do <em>FreeBSD</em>, um sistema Unix de código aberto. Apesar disso, toda a interface e aplicativos do OS X são proprietários, o que é permitido pela licença do FreeBSD. Algumas das vantagens do OS X são:</p>
<ul>
<li>Desempenho. O sistema operacional e o computador são produzidos pela Apple e estão integrados harmoniosamente.</li>
<li>Interface. Os desenvolvedores de aplicativos para OS X devem seguir rígidos padrões estéticos para não prejudicar a consistência da interface.</li>
</ul>
<p>Algumas de suas desvantagens:</p>
<ul>
<li>Compatibilidade. Mesmo sendo possível instalar o OS X em computadores de outros fabricantes, essa prática não é recomendada pela Apple e nem sempre produz resultados satisfatórios.</li>
<li>Restritivo. Como o Windows, não é possível instalar e compartilhar o OS X sem comprar uma licença.</li>
</ul>
<p>Mesmo sendo tecnicamente um Unix, o OS X mantém esse aspecto em segundo plano, privilegiando a administração do sistema em sua interface proprietária. É possível utilizar diversos comandos tradicionais de Unix no terminal do OS X.</p>
</section>
<section id="linux" class="level3">
<h3>Linux</h3>
<p>Dada a sua natureza aberta de desenvolvimento, não existe um único sistema operacional Linux, mas diversas variações chamadas distribuições. Contudo, as principais distribuições possuem interfaces semelhantes. Na operação via linha de comando, há pouca diferença entre uma distribuição e outra.</p>
<p>As distribuições Linux têm procurado oferecer uma experiência familiar ao usuário habituado à interface de janelas, mas sempre mantendo a tradição da operação via linha de comando. A interface de janelas oferece facilidade de uso, mas a linha de comando é mais eficiente para certos tipos de tarefas, principalmente para usuários mais experientes executando tarefas administrativas.</p>
<p>Algumas vantagens do Linux em relação ao Windows e OS X são:</p>
<ul>
<li>Liberdade e versatilidade. Preservadas as condições definidas na licença de cada componente, o Linux pode ser utilizado como melhor convier ao usuário.</li>
<li>Aprendizado. Usuários interessados no funcionamento do sistema operacional ou em aprender a programar encontram imensas fontes de informação num sistema Linux, tanto na forma de código fonte quanto de documentação.</li>
<li>Programas. Um usuário de Linux tem a sua disposição uma grande variedade de programas a partir do instalador de pacotes da distribuição. Usuários do OS X e Windows já possuem instaladores semelhantes, mas no Linux os instaladores estão consolidados há mais tempo e a instalação de programas “por fora” é algo raro e não recomendado. Essa característica assegura a compatibilidade e a segurança do sistema operacional.</li>
<li>Compatibilidade. Enquanto que com o OS X não é usual a instalação em equipamentos diferentes e com o Windows será necessário instalar diversos <em>drivers</em> de dispositivo à parte, uma distribuição Linux recém instalada está pronta para uso e raramente necessita de ajustes. No Linux, os <em>drivers</em> são chamados de <em>módulos</em> do kernel e são carregados automaticamente quando o o dispositivo é identificado.</li>
</ul>
<p>Dentre as desvantagens do Linux, destacam-se:</p>
<ul>
<li>Falta de padronização. Existem diferenças significativas entre as distribuições. A execução de uma tarefa em uma distribuição não será necessariamente igual em outra distribuição.</li>
<li>Suporte. Alguns fabricantes de dispositivos e programas não fornecem suporte para Linux, obrigando o usuário a manter um Windows ou OS X exclusivamente para esses casos.</li>
</ul>
<p>A diversidade de tipos de Linux pode ser entendida tanto como uma vantagem como uma desvantagem. Enquanto este fato torna mais difícil aprender sobre as diversas peculiaridades, é conveniente a existência de distribuições para as mais diversas finalidades e preferências. O desenvolvimento do Linux é tão dinâmico que em muitos casos o usuário pode optar por uma versão mais consolidada, chamada <em>estável</em>, ou uma versão mais avançada mas menos testada, chamada <em>beta</em>.</p>
<p>Algumas dessas variações não são exclusividade do Linux. É comum no Linux e entre outros sistemas operacionais a oferta de diferentes versões de um mesmo sistema operacional para diferentes finalidades, como versões para servidor ou para ambiente doméstico. Também existem distribuições que oferecem versões estáveis com suporte estendido, como é o caso do Ubuntu LTS (<em>long term support</em>) e seus derivados.</p>
</section>
</section>
<section id="entendendo-o-hardware-do-computador" class="level2">
<h2>4.2: Entendendo o Hardware do Computador</h2>
<p><strong>Peso:</strong> 2</p>
<p>O funcionamento interno dos computadores modernos envolve muita complexidade para tornar sua operação mais simples e para se obter melhores resultados. É por conta do aprimoramento da tecnologia que existem diferentes tipos de conexões e dispositivos que podem ser conectados ao computador.</p>
<section id="periféricos" class="level3">
<h3>Periféricos</h3>
<p>Genericamente, um periférico é qualquer equipamento externo conectado ao computador. Muitos periféricos podem até ser considerados computadores, alguns inclusive dotados de sistema operacional. É o caso de roteadores ou <em>switches</em> de rede, muitos utilizando alguma variação de Linux. Porém, diferente de computadores tradicionais, são equipamentos com uma finalidade específica. No caso dos roteadores, sua função é conectar computadores para formar uma rede local (LAN: <em>Local Area Network</em>).</p>
<p>Um computador moderno conta com os seguintes tipos de conexões para periféricos:</p>
<ul>
<li><strong>USB</strong>: <em>Universal Serial Bus</em>, é o tipo de conexão mais comum. Utilizado por impressoras, teclado, mouse, telefones, etc. No Linux, o comando <code>lsusb</code> lista todos os dispositivos USB identificados pelo sistema.</li>
<li>Entrada/Saída áudio analógico: Para caixas de som e microfone.</li>
<li><strong>VGA</strong>/<strong>DVI</strong>: Para conectar um monitor.</li>
<li><strong>HDMI</strong>: Saída integrada de vídeo e áudio, para enviar som e imagem para televisores.</li>
<li><strong>Ethernet</strong>: Conexão de rede cabeada.</li>
</ul>
<p>Existem outras conexões pouco utilizadas ou em desuso, como a serial e a porta paralela. Além das conexões externas, a placa-mãe possui diversas conexões para componentes ligados internamente.</p>
</section>
<section id="conexões-internas" class="level3">
<h3>Conexões internas</h3>
<p>A placa-mãe é a responsável por interligar todos os componentes do computador. Diversos componentes que antigamente eram separados hoje são integrados na placa-mãe, como controladores de disco e dispositivos de áudio e vídeo. Além disso, diversas conexões tornaram-se obsoletas, como as conexões ISA e AGP.</p>
<p>Além das conexões para memória e processador, as conexões internas mais utilizadas são:</p>
<ul>
<li><strong>PCI</strong>: Para conectar placas expansoras, como placas de vídeo.</li>
<li><strong>IDE</strong>: Utilizada para discos rígidos e DVD/CDROM.</li>
<li><strong>SATA</strong>: Para discos rígidos mais modernos.</li>
</ul>
<p>Antes mesmo que o sistema operacional esteja encarregado de controlar o computador, o BIOS (<em>Basic Input/Output System</em>, ou Sistema Básico de Entrada/Saída) da placa-mãe identifica e realiza testes simples nos itens fundamentais de hardware, como processador, memória e disco. Caso algum dos componentes internos não esteja ligado corretamente, o BIOS emitirá uma mensagem notificando sobre o erro. Caso não encontre erros, o BIOS executa o carregador de boot localizado no início do disco rígido pré-definido que, por sua vez, carregará o sistema operacional.</p>
</section>
<section id="dispositivos-de-armazenamento" class="level3">
<h3>Dispositivos de armazenamento</h3>
<p>No Linux, todo dispositivo de armazenamento encontrado é identificado por um arquivo dentro do diretório <code>/dev/</code> e são genericamente chamados <em>dispositivos de bloco</em>. O nome utilizado para o arquivo depende do tipo do dispositivo (IDE, SATA, SCSI etc) e das partições nele contidas.</p>
<p>Discos rígidos, mesmo os externos e os SSD (discos de estado sólido), são nomeados <code>/dev/sda</code>, <code>/dev/sdb</code>, <code>/dev/sdc</code>, etc, na ordem correspondente à que são identificados pelo sistema. A primeira partição do disco <code>/dev/sda</code> será <code>/dev/sda1</code>, a segunda partição neste disco será <code>/dev/sda2</code>, assim por diante. O mesmo vale para os demais dispositivos de armazenamento de bloco, como <em>pendrives</em>. É na partição onde fica o sistema de arquivos, que é responsável por organizar o armazenamento de arquivos. Os sistemas de arquivos mais populares no Linux são o <em>ext3</em>, <em>ext4</em>, <em>xfs</em> e <em>btrfs</em>.</p>
<p>Em versões mais antigas do kernel, os dispositivos IDE eram identificados como <code>/dev/hda</code>, <code>/dev/hdb</code>, etc. Nos sistemas Linux mais recentes, desde a versão 2.6 do Kernel, mesmo os discos IDE serão identificados como se fossem discos SATA. Nesse caso, os nomes serão criados com o prefixo <em>sd</em>, mas ainda será respeitado o esquema de nomes por <em>master</em> ou <em>slave</em> (no primeiro canal IDE, <em>sda</em> para master e <em>sdb</em> para slave, por exemplo).</p>
<p>Dispositivos de CD/DVD e disquetes também têm aquivos correspondentes em <code>/dev/</code>. Um leitor/gravador de CD/DVD conectado ao primeiro canal IDE será identificado como <code>/dev/sr0</code>. Se conectado ao segundo canal IDE será identificado como <code>/dev/sr1</code>. Um antigo dispositivo de disquete <em>floppy disk</em> é identificado pelo arquivo <code>/dev/fdO</code>.</p>
</section>
</section>
<section id="onde-a-informação-é-armazenada" class="level2">
<h2>4.3: Onde a Informação é Armazenada</h2>
<p><strong>Peso:</strong> 3</p>
<p>Como todo sistema operacional moderno, o Linux guarda um registro de ocorrência de todos os eventos relevantes no sistema. Para verificar como ocorreu o processo de carregamento do sistema é usado o comando <code>dmesg</code>, que exibe as mensagens no chamado <em>kernel ring buffer</em>. Essas mensagens do carregamento são sobrescritas toda vez que o sistema é reiniciado e são armazenadas em <code>/var/log/dmesg</code>, além de outras mensagens do kernel, que podem ser checadas dentro do arquivo <code>/var/log/messages</code>.</p>
<p>O Linux também mantém diversas informações relevantes a respeito dos processos do sistema. Em linhas gerais, um processo é um programa em execução. Cada processo possui um número único de identificação chamado <em>PID</em>. Esse número pode ser usado para mudar a prioridade de um processo ou para finalizá-lo.</p>
<section id="monitoramento-de-processos" class="level3">
<h3>Monitoramento de processos</h3>
<p>Diversos comandos podem ser usados para inspecionar processos e são especialmente úteis para localizar e finalizar processos dispensáveis ou suspeitos. São eles:</p>
<ul>
<li><code>ps</code>: Mostra os processos ativos de maneira detalhada;</li>
<li><code>top</code>: Monitora continuamente os processos, mostrando informações como uso de memória e CPU de cada processo. A tecla <code>[H]</code> fornece ajuda sobre o uso do programa. Pode ser usado para alterar a prioridade de um processo;</li>
<li><code>pstree</code>: Mostra processos ativos em formato de árvore genealógica (processos filhos ligados aos respectivos processos pais);</li>
</ul>
<p>Um usuário só pode encerrar ou modificar a prioridade de seus próprios processos, e não pode reduzir a prioridade para abaixo de 0. O usuário root pode encerrar processos de qualquer usuário, e pode reduzir a prioridade para abaixo de 0 (maior prioridade).</p>
</section>
<section id="recursos-de-sistema" class="level3">
<h3>Recursos de sistema</h3>
<p>A administração de processos deve se basear nos recursos de hardware disponíveis. Basicamente, processos suspeitos que ocupam muita memória ou processamento podem ser finalizados em situações de emergência.</p>
<p>O comando <code>free</code> mostra o montante total de memória RAM, a quantidade de memória livre e o espaço de <em>swap</em>, em <em>kilobytes</em>:</p>
<pre><code>$ free
                 total       used       free     shared    buffers     cached
Mem:      16442484   15904244     538240          0     524656    1570016
-/+ buffers/cache:   13809572    2632912
Swap:      3998712    3336664     662048</code></pre>
<p>Numa situação em que não há mais memória RAM disponível e o espaço de swap já está demasiado ocupado, existe a suspeita de que algum processo está ocupando muita memória indevidamente e deve ser finalizado.</p>
</section>
<section id="localização-dos-arquivos-de-sistema" class="level3">
<h3>Localização dos arquivos de sistema</h3>
<p>Todo arquivo no sistema tem uma localização adequada, que varia conforme sua finalidade. Em sistemas Linux, o padrão que define a localização dos arquivos e diretórios chama-se <em>Filesystem Hierarchy Standard</em>, <strong>FHS</strong>.</p>
</section>
<section id="fhs" class="level3">
<h3>FHS</h3>
<p>O FHS (do inglês <em>Filesystem Hierarchy Standard</em> ou <em>Hierarquia Padrão de Sistemas de arquivos</em>) é o padrão de localização de arquivos adotado pela maioria da distribuições Linux. Cada um dos diretórios serve a um propósito, sendo divididos entre os que devem existir na partição raiz e os que podem ser pontos de montagem para outras partições ou dispositivos.</p>
<p>Os diretórios que residem obrigatoriamente na partição raiz são:</p>
<ul>
<li><code>/bin</code> e <code>/sbin</code>: Contêm os programas essenciais para carregar e administrar o sistema.</li>
<li><code>/etc</code>: Arquivos de configuração específicos da máquina.</li>
<li><code>/lib</code>: Bibliotecas compartilhadas pelos programas em <code>/bin</code> e <code>/sbin</code> e módulos do kernel.</li>
<li><code>/mnt</code> e <code>/media</code>: Pontos de montagem para outras partições ou dispositivos.</li>
<li><code>/proc</code> e <code>/sys</code>: Diretórios especiais com informações de processos e hardware.</li>
<li><code>/dev</code>: Arquivos de acesso a dispositivos e outros arquivos especiais.</li>
</ul>
<p>Os demais diretórios da raiz que podem ser pontos de montagem são:</p>
<ul>
<li><code>/boot</code>: Kernel e mapas do sistema e os carregadores de boot de segundo estágio.</li>
<li><code>/home</code>: Os diretórios dos usuários.</li>
<li><code>/root</code>: Diretório do usuário root.</li>
<li><code>/tmp</code>: Arquivos temporários.</li>
<li><code>/usr/local</code> e <code>/opt</code>: Programas adicionais. Também podem conter as bibliotecas necessárias para os programas adicionais.</li>
<li><code>/var</code>: Dados de programas e arquivos relacionados, arquivos de log, bancos de dados e arquivos de sites. Pode conter diretórios compartilhados.</li>
</ul>
<p>Em computadores pessoais, não há necessidade de criar partições extras ou em outros dispositivos. Já em servidores, é recomendável fazê-lo, pois esse procedimento torna a administração mais simples e pode resultar em ganho de desempenho.</p>
</section>
</section>
<section id="seu-computador-em-rede" class="level2">
<h2>4.4: Seu Computador em Rede</h2>
<p><strong>Peso:</strong> 2</p>
<p>A finalidade de um computador quase sempre está associado ao seu uso numa rede de computadores e o meio de comunicação entre computadores mais consolidado são as redes IP (<em>Internet Protocol</em>). As principais características desse tipo de rede são a utilização de um número de identificação - o número IP - para o dispositivo conectado e a possibilidade de comunicação entre diferentes redes de computadores, daí origina o nome <em>Internet</em> (entre redes). Ao conectar um computador na rede, seja via um roteador numa rede interna ou diretamente à Internet, ele necessariamente precisará obter um endereço IP para poder comunicar-se com outras máquinas.</p>
<section id="configuração-dos-clientes-na-rede" class="level3">
<h3>Configuração dos clientes na rede</h3>
<p>Na maior parte dos casos, tanto a configuração da interface quanto das rotas de rede é feita automaticamente usando o recurso chamado <em>DHCP</em>. O programa DHCP cliente envia uma requisição para a rede por meio da interface especificada e o servidor responde com informações de endereço IP, máscara de rede, broadcast etc., que serão usadas para configurar a interface local.</p>
<p>Fundamental para o funcionamento da rede é que a interface de rede esteja configurada corretamente. Se toda a parte estrutural da rede - roteador e cabeamento - estiver corretamente preparada e a interface de rede corretamente instalada, esta poderá ser configurada manualmente por meio do comando <code>ifconfig</code> ou do comando <code>ip</code>.</p>
<p>O <code>ifconfig</code> e o <code>ip</code> também podem ser usados para inspecionar as configurações de uma interface. O comando <code>ifconfig</code> sem argumentos mostra as configurações de todas as interfaces ativas do sistema. No Linux, a única interface de rede que é sempre presente é a <em>lo</em>, que representa uma interface de comunicação local, não correspondente a nenhum item de hardware. Para verificar as configurações de uma interface específica, basta fornecer como argumento o nome da interface.</p>
<p>De modo semelhante, o comando <code>ip addr show</code> mostra as configurações de todas as interfaces ativas do sistema, sendo possível especificar a interface de rede específica para inspeção.</p>
</section>
<section id="endereço-ip" class="level3">
<h3>Endereço IP</h3>
<p>Endereços IP no formato a.b.c.d - conhecidos pelo termo inglês <em>dotted-quad</em> - são a expressão, em números decimais, de um endereço de rede binário. Cada um dos quatro campos separados por pontos corresponde a um byte, algumas vezes chamado octeto. Por exemplo, o número IP 192.168.1.1 corresponde à forma binária 11000000.10101000.00000001.00000001.</p>
<p>Cada interface de rede numa mesma rede deverá ter um endereço IP único, mas cada computador pode possuir mais de uma interface de rede. Nesse caso, o computador pode estar conectado a diversas redes diferentes.</p>
</section>
<section id="endereço-de-rede-máscara-de-rede-e-endereço-broadcast" class="level3">
<h3>Endereço de rede, máscara de rede e endereço broadcast</h3>
<p>Para que os dados possam ser encaminhados corretamente pela rede, a interface de rede precisa conhecer seu número IP, o número IP de destino e a qual rede eles pertencem.</p>
<p>Na maioria dos casos, a rede do IP de destino só será conhecida quando esse IP de destino estiver dentro da mesma rede interna do IP de origem. É possível identificar se um IP pertence a uma rede observando sua máscara de rede.</p>
<p>A máscara de rede define uma quantidade de bits. Se essa quantidade inicial de bits em um endereço é igual a de outro endereço, significa que ambos pertencem a mesma rede.</p>
<ul>
<li>Máscara de 16 bits: 11111111.11111111.00000000.00000000 = 255.255.0.0</li>
<li>Máscara de 17 bits: 11111111.11111111.10000000.00000000 = 255.255.128.0</li>
</ul>
<p>Na primeira máscara (16 bits), pertencerão à mesma rede os IPs cujos dois primeiros octetos do endereço não difiram entre si. Na segunda máscara (17 bits), pertencerão à mesma rede os IPs cujos dois primeiros octetos e o primeiro bit do terceiro octeto do endereço não difiram entre si. Dessa forma, dois endereços de interface 172.16.33.8 e 172.16.170.3 estarão na mesma rede se a máscara for de 16 bits, mas não se a máscara for de 17 bits.</p>
<p>As máscaras de rede variam dependendo do contexto da rede. Consequentemente, o endereço da rede corresponde à parte do número IP determinado pelos bits marcados da máscara de rede. Para uma máquina 172.16.33.8 com máscara de rede 255.255.0.0, o endereço da rede será 172.16.0.0.</p>
<p>O endereço broadcast e o número IP que designa todas as interfaces numa rede. Para um endereço de rede 172.16.0.0, o endereço broadcast será 172.16.255.255.</p>
<p>Um endereço IP pode demonstrar a informação de endereço da rede, máscara de rede e broadcast numa forma abreviada. Por exemplo, 192.168.1.129/25, em que número 25 após a barra indica a quantidade de bits da máscara. Conclui-se que a máscara de rede é 255.255.255.128, o endereço IP é 192.168.1.128 e o endereço de broadcast é 192.168.1.255.</p>
</section>
<section id="ipv4-e-ipv6" class="level3">
<h3>IPv4 e IPv6</h3>
<p>O padrão tradicional de 32 bits (quatro octetos de bits) dos números IP é conhecido como <em>IPv4</em>. Há outro padrão mais recente, conhecido como <em>IPv6</em>, que consiste de uma seqüência de 128 bits. A vantagem óbvia do IPv6 sobre o IPv4 é a disponibilidade de uma quantidade muito maior de números IP. Enquanto o IPv4 é capaz de gerar 4.294.967.296 endereços, o IPv6 disponibiliza 2<sup>128</sup> endereços.</p>
<p>Um endereço IPv6 normalmente é escrito na forma de oito grupos de quatro números hexadecimais, como: 2001:0db8:85a3:08d3:1319:8a2e:0370:7334.</p>
<p>O IPv4 ainda é muito mais difundido e é possível a intercomunicação entre os dois padrões. Porém, à medida que cada vez mais dispositivos demandarem o uso de um endereço IP, o padrão IPv6 estará mais disseminado o vigente.</p>
</section>
<section id="rotas" class="level3">
<h3>Rotas</h3>
<p>Conhecendo o IP de destino e a qual rede ele pertence, o sistema será capaz de encaminhar os dados pela interface de rede correta. Contudo, principalmente em comunicação na Internet, dificilmente a interface local estará diretamente conectada à rede do IP de destino. Para esses casos, uma <strong>rota padrão</strong> é estabelecida: um endereço IP – conhecido como <em>gateway</em> – dentro de uma rede conhecida é utilizado para encaminhar esse tipo de comunicação para uma rede desconhecida. Esse processo ocorre sucessivamente, até que encontre a rede a qual onde o IP de destino é conhecido.</p>
<p>A tabela de rotas do sistema pode ser consultada de várias maneiras. O comando <code>route</code> tem a finalidade de manipular a tabela de rotas, mas sem argumentos apenas exibe a tabela de rotas atual:</p>
<pre><code>$ route 
Tabela de Roteamento IP do Kernel
Destino         Roteador        MáscaraGen.    Opções Métrica Ref   Uso Iface
default         _gateway        0.0.0.0         UG    0      0        0 tun0
10.8.0.0        0.0.0.0         255.255.255.0   U     0      0        0 tun0
_gateway        0.0.0.0         255.255.255.255 UH    0      0        0 tun0
192.168.2.0     0.0.0.0         255.255.255.128 U     100    0        0 enp0s25</code></pre>
<p>Nessa saída é possível identificar as diferentes rotas configuradas para as interfaces de rede. A rota padrão é identificada pelo termo <em>default</em> na primeira coluna. O comando <code>netstat</code>, utilizado para exibir várias informações a respeito da rede, também pode exibir essa saída ao ser utilizar com a opção <code>-r</code>. O comando <code>ip</code> é outro comando que pode ser utilizado para inspecionar as rotas e possui uma saída mais simplificada:</p>
<pre><code>$ ip route show
default via 10.8.0.1 dev tun0 
10.8.0.0/24 dev tun0 scope link 
10.8.0.1 dev tun0 proto kernel scope link src 10.8.0.6 
192.168.2.0/25 dev enp0s25 proto kernel scope link src 192.168.2.10 metric 100 </code></pre>
<p>Essas informações são especialmente úteis quando a rede está apresentando falhas de conexão. Um primeiro passo para diagnosticar o problema verificando se o endereço de destino da rota padrão está acessível.</p>
</section>
<section id="diagnóstico-de-conexão" class="level3">
<h3>Diagnóstico de conexão</h3>
<p>O comando <code>ping</code> pode ser usado para fazer diagnósticos simples na rede rede. Utilizando o protocolo <em>ICMP</em>, ele simplesmente envia uma pequena quantidade de dados para uma máquina especificada e aguarda um resposta. Se a máquina remota responder, significa o nível básico de conectividade da rede está funcionando corretamente.</p>
<p>Se o acesso a diferentes sites de Internet não estiver funcionando, por exemplo, é possível que exista algum problema de conectividade na rota padrão. Após identificar o endereço do gateway, o comando <code>ping</code> pode ser utilizado para verificar se o mesmo está acessível:</p>
<pre><code>$ ping -c3 10.8.0.1
PING 10.8.0.1 (10.8.0.1) 56(84) bytes of data.
64 bytes from 10.8.0.1: icmp_seq=1 ttl=64 time=4.07 ms
64 bytes from 10.8.0.1: icmp_seq=2 ttl=64 time=3.20 ms
64 bytes from 10.8.0.1: icmp_seq=3 ttl=64 time=1.70 ms

--- 10.8.0.1 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2002ms
rtt min/avg/max/mdev = 1.700/2.994/4.075/0.981 ms</code></pre>
<p>Nesse exemplo, foi possível verificar que os três pacotes (definidos com a opção <code>-c3</code>) enviados para o gateway <code>10.8.0.1</code> foram respondidos com sucesso. Isso significa que o problema hipotético não está ocorrendo no envio de pacotes pela rota padrão.</p>
</section>
<section id="resolução-de-nomes" class="level3">
<h3>Resolução de nomes</h3>
<p>Problemas de conexão de rede também podem estar associados ao serviço de resolução de nomes <em>DNS</em>. O DNS é responsável por traduzir nomes como <em>lcnsqr.com</em> para um número IP e vice-versa. A configuração incorreta do DNS resulta numa rede praticamente inoperante, pois imensa maioria dos destinos remotos são acessadas por nome e não diretamente pelo seu número IP.</p>
<p>Para testes mais simples de resolução de nomes, o comando <code>host</code> pode ser utilizado. Por exemplo, traduzir o nome <em>lcnsqr.com</em> o número IP correspondente:</p>
<pre><code>$ host lcnsqr.com
lcnsqr.com has address 162.243.102.48
lcnsqr.com mail is handled by 20 trilobit.lcnsqr.com.</code></pre>
<p>De modo semelhante, é possível consultar se um nome está associado a um número IP:</p>
<pre><code>$ host 162.243.102.48
48.102.243.162.in-addr.arpa domain name pointer trilobit.lcnsqr.com.</code></pre>
<p>A esse tipo de associação se dá o nome de DNS reverso. Caso o comando <code>host</code> não devolva um número IP para o nome pesquisado, é possível fazer outros testes indicando um servidor DNS específico logo após o nome sendo pesquisado:</p>
<pre><code>$ host lcnsqr.com 208.67.222.222
Using domain server:
Name: 208.67.222.222
Address: 208.67.222.222#53
Aliases: 

lcnsqr.com has address 162.243.102.48
lcnsqr.com mail is handled by 20 trilobit.lcnsqr.com.</code></pre>
<p>Se apenas ao especificar um servidor DNS ao comando <code>host</code> se obtém o endereço IP correspondente, significa que a configuração de DNS local não está correta ou o servidor DNS utilizado por padrão não está funcionando.</p>
<p>As configurações de DNS ficam armazenadas dentro de arquivos de texto comuns, no diretório <code>/etc</code>. Apesar de cada distribuição utilizar métodos distintos para realizar as configurações automáticas de rede, todas elas obedecem à padronização tradicional de armazenamento das configurações. Os principais arquivos de configuração relacionados ao DNS no cliente são:</p>
<ul>
<li><code>/etc/hosts</code>: Associa os números IP da rede a nomes. Ele é prático para atribuir um nome mais simples para máquinas acessadas frequentemente ou para pequenas redes, onde um serviço de resolução automática de nomes não é necessário.</li>
<li><code>/etc/resolv.conf</code>: Determina os números IP dos servidores de resolução de nomes DNS.</li>
</ul>
<p>Via de regra, o arquivo <code>/etc/hosts</code> é consultado primeiro. Em seguida, caso o nome consultado não seja encontrado no arquivo, será consultado um servidor DNS especificado no arquivo <code>/etc/resolv.conf</code>.</p>
<p>O arquivo <code>/etc/hosts</code> é bastante simples. Nele os números IP são posicionados ao lado dos respectivos nomes:</p>
<pre><code>$ cat /etc/hosts
127.0.0.1       localhost
162.243.102.48   trilobit</code></pre>
<p>Mais de um nome pode ser atribuído a um mesmo IP, atuando como um nome alternativo para o mesmo IP. Por exemplo, incluir o nome <code>lcnsqr</code> ao IP 162.243.102.48:</p>
<pre><code>162.243.102.48   trilobit lcnsqr</code></pre>
<p>Já no arquivo <code>/etc/resolv.conf</code> são indicados os números IP dos servidores DNS, ou seja, os computadores que fazem a tradução de um nome para um número IP e vice versa. A entrada fundamental no <code>/etc/resolv.conf</code> é <strong>nameserver</strong>, que define o servidor DNS. Outras entradas nameserver podem estar indicadas, para o caso do primeiro servidor DNS estar fora do ar ou muito ocupado:</p>
<pre><code>$ cat /etc/resolv.conf
domain lcnsqr.com
nameserver 192.168.1.1
nameserver fd6d:c2f2:544f::1</code></pre>
<p>A linha <code>domain</code> indica o domínio local. Assim, quando for consultado um nome sem domínio, o domínio padrão será considerado. Se necessário, as entradas nameserver podem ser alteradas para outros endereços IP cujo funcionamento tenha sido verificado com o comando <code>host</code>. Os endereços IP <code>208.67.222.222</code> e <code>208.67.220.220</code> são servidores DNS públicos do <a href="http://www.opendns.com/">Opendns.com</a> e podem ser utilizados livremente. Outros servidores DNS públicos são <code>8.8.8.8</code> e <code>8.8.4.4</code>, estes oferecidos pelo <a href="https://developers.google.com/speed/public-dns/">Google</a>.</p>
<p>O comando <code>dig</code> (<em>Domain Information Groper</em>) retorna informações mais avançadas para o diagnóstico de problemas em servidores DNS. Se nenhum argumento for utilizado, o comando realizará o teste-padrão no(s) servidor(es) encontrados no arquivo <code>/etc/resolv.conf</code>. Para utilizar um servidor específico, basta indicá-lo após o caractere _<span class="citation" data-cites="_">@_</span>:</p>
<pre><code>$ dig lcnsqr.com @8.8.8.8

; &lt;&lt;&gt;&gt; DiG 9.11.4-P2-RedHat-9.11.4-13.P2.fc28 &lt;&lt;&gt;&gt; lcnsqr.com @8.8.8.8
;; global options: +cmd
;; Got answer:
;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 57487
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1

;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: 512
;; QUESTION SECTION:
;lcnsqr.com.            IN  A

;; ANSWER SECTION:
lcnsqr.com.     1799    IN  A   162.243.102.48

;; Query time: 230 msec
;; SERVER: 8.8.8.8#53(8.8.8.8)
;; WHEN: qua fev 27 01:17:14 -03 2019
;; MSG SIZE  rcvd: 55</code></pre>
<p>Essa resposta mostra que o nome lcnsqr.com foi localizado pelo servidor DNS indicado. O trecho <em>QUESTION</em> mostra qual foi o nome pesquisado e o trecho <em>ANSWER</em> mostra qual foi a resposta do servidor consultado. A letra <em>A</em> nas linhas <em>QUESTION</em> e <em>ANSWER</em> indica que o registro DNS possui um endereço IPv4 associado. Se o endereço IP associado fosse IPv6, o tipo indicado para o registro seria <em>AAAA</em>.</p>
</section>
<section id="outros-problemas-de-rede" class="level3">
<h3>Outros problemas de rede</h3>
<p>Se todas as configurações de rede estiverem em ordem e ainda assim existirem problemas de conectividade, é possível que as falhas estejam em outros pontos da rede. Um comando importante para analisar o tráfego e a resposta das máquinas remotas é o <code>netstat</code>. Por exemplo, é possível inspecionar todas as conexões do protocolo TCP ativas:</p>
<pre><code>$ netstat -tn
Active Internet connections (w/o servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        0    352 162.243.102.48:22    189.100.34.204:43382    ESTABLISHED</code></pre>
<p>A opção <code>-n</code> determina que sejam mostrados apenas os números IPs e a opção <code>-t</code> determina a configuração apenas das conexões do protocolo TCP. Para exibir continuamente as novas conexões, basta informar a opção <code>-c</code>.</p>
<p>O netstat também agrega algumas funções de outros comandos. Com a opção <code>-i</code>, exibe todas as interfaces de rede ativas e estatísticas relacionadas:</p>
<pre><code>$ netstat -i
Kernel Interface table
Iface   MTU Met   RX-OK RX-ERR RX-DRP RX-OVR    TX-OK TX-ERR TX-DRP TX-OVR Flg
eth0       1500 0    270337      0      0 0        143119      0      0      0 BMRU
lo        16436 0         0      0      0 0             0      0      0      0 LRU</code></pre>
<p>Caso o tráfego de dados mostre que algumas conexões não respondem, o problema poderá estar no ponto remoto, ou seja, em outro computador da rede. Para identificar em que ponto as conexões não seguem adiante, existe o comando <code>traceroute</code>. Por exemplo, o comando <code>traceroute 162.243.102.48</code> mostra as rotas percorridas por um pacote até chegar ao destino <code>162.243.102.48</code>, permitindo avaliar se o problema apresentado encontra-se na rede local ou no caminho até o destino.</p>
</section>
</section>
</section>
</body>
</html>

